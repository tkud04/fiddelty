/** Version: 2.0.2 Build Date: 2020-06-03T11:50:05-04:00 */"use strict";!function(){function u(){var e;if("undefined"!=typeof XMLHttpRequest)e=new XMLHttpRequest;else for(var t=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],n=0,i=t.length;n<i;n++)try{e=new ActiveXObject(t[n]);break}catch(e){}return e}function m(){var e="/"!=location.pathname.charAt(location.pathname.length-1)?location.pathname:location.pathname.substring(0,location.pathname.length-1);return location.protocol+"//"+location.host+e+location.hash}function t(n,i,o){!function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}(n,i,function e(t){(function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null})(n,i,e),o(t)})}function e(t){if("complete"!==document.readyState){if(document.addEventListener){var e=function e(){window.removeEventListener("load",e),document.removeEventListener("DOMContentLoaded",e),t()};return document.addEventListener("DOMContentLoaded",e),void window.addEventListener("load",e)}if(document.attachEvent){document.attachEvent("onreadystatechange",function e(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),t())})}}else t()}var n="Could not find script id seg-client; All features disabled. Contact Segmint.",i="The attribute 'data-config-id' is not valid. Please check the script tag and try again.",o="Failed to load client configuration. Verify your script tag or Contact Segmint.";function s(e){return"Error getting decision from Segmint API. No content will be displayed. "+e}function v(e,t,n,i){return{site_id:e,uri:t,et:n,ts:(new Date).toISOString(),attributes:i||null}}var c=[],r="seg-styles-zones",l="seg-styles-res-zones";function a(e,t,n,i,o){if(o)e.error(o);else if(null!==i&&null!==i.content){var r=document.createElement("div");switch(r.innerHTML=i.content,r.className="seg-zmp content",n.style){case"responsive":!function(e,t){var n=e+"x"+t;if(!c.includes(n)){var i=document.getElementById(l);i||((i=document.createElement("style")).type="text/css",i.id=l,document.head.appendChild(i)),i.innerText+="@media screen and (min-width: "+e+") {\n\t\t\t.media-"+n+" .seg-invo {\n\t\t\t\tpadding: 0; height: "+t+"px;\n\t\t\t}\n\t\t}";var o=t/e*100;i.innerText+=".media-"+n+" {\n\t\t\tpadding-bottom: "+o.toFixed(2)+"%; max-width: "+e+"px; margin: auto;\n\t\t} ",c.push(n)}}(i.width,i.height);var a=document.createElement("div");a.className="seg-invo media-"+i.width+"x"+i.height,a.appendChild(r),t.parentNode&&t.parentNode.replaceChild(a,t);break;case"fixed":var u=document.createElement("div");u.style.width=i.width+"px;",u.style.height=i.height+"px;",u.appendChild(r),t.parentNode&&t.parentNode.replaceChild(u,t);break;case"child":t.innerHTML=i.content;break;case"no-wrapper":default:t.outerHTML=i.content}}}function d(){var e=document.getElementById(r);e||((e=document.createElement("style")).id=r,e.type="text/css",e.innerText=".seg-invo {position: relative; height: 0; overflow: hidden;}\n.seg-invo div.content {position: absolute;top:0;left: 0;width: 100%;height: 100%;background-color: transparent;border: 0px none transparent;padding: 0px;overflow: hidden;display: inline-block;}\n.seg-zmp { margin: 0px;padding: 0px;overflow: hidden;text-decoration: none;border: 0px;}\n.seg-zmp img{ max-width: 100%;}",document.head.appendChild(e))}var f="seg-cookie-styles";function p(){var e=document.getElementById(f);e||((e=document.createElement("style")).type="text/css",e.id=f,e.innerText=".seg-cookies iframe.content {position: absolute;top:0;left: 0;width: 100%;height: 100%;background-color: transparent;border: 0px none transparent;padding: 0px;overflow: hidden;display: inline-block;}",document.head.appendChild(e))}function g(e,t){t&&(e=e+"?"+encodeURI("ucic="+t));var n=document.createElement("div");n.className="seg-cookies",n.style.position="absolute",n.style.zIndex="-100",n.style.left="0px",n.style.top="0px";var i=document.createElement("iframe");i.src=e,i.className="content",i.style.height="1px",i.style.width="1px",n.appendChild(i),document.body.appendChild(n)}var h,b,y,E,w,T,S,x,L,N,I,C,A,U,M,k,O,q,z,F=(z=0,{info:function(e){2<=z&&_("INFO",e)},error:function(e){1<=z&&_("ERROR",e)},fatal:function(e){0<=z&&_("FATAL",e,!0)},debug:function(e){3<=z&&_("DEBUG",e)},enable:function(){z=2},enableDebug:function(){z=3}}),H=(M=F,q=!(O="N"),{$:k={configBaseUrl:"https://cdn.segmint.net",requestTimeout:2e3,defaultInit:!0,defaultZoneConfig:{newWindow:!0,style:"no-wrapper",placeholder:!1},zones:{},logEnabled:!1},getZoneConfig:function(e){return k.zones[e]?k.zones[e]:k.defaultZoneConfig},isLoaded:function(){return"Y"===O},isLoading:function(){return"L"===O},errorLoading:function(){return"E"===O},load:function(t){O="L";var e=document.getElementById("seg-client");if(!e||"SCRIPT"!==e.tagName.toUpperCase())return O="E",void M.fatal(n);W(e),k.configId?function i(e){var t=k.configBaseUrl+"/"+k.configId+".json",n=u();n.open("GET",t,!0),n.timeout=k.requestTimeout,n.addEventListener("timeout",function(){M.error("Timeout - no response from Segmint after "+k.requestTimeout+"ms"),e(!(O="E"))}),n.setRequestHeader("Content-Type","application/json"),n.onreadystatechange=function(){!function(e,t){if(4===e.readyState)if(200===e.status)G(JSON.parse(e.responseText)),t(!0);else if(400<=e.status&&e.status<500)M.fatal("Unable to retrieve configuration. status: "+e.status+" text: "+e.statusText),t(!1);else{if(!q){q=!0;var n=-1===k.configBaseUrl.indexOf("s3.amazonaws.com")?"https://s3.amazonaws.com/"+k.configBaseUrl.replace("https://","").replace("http://",""):null;if(null!==n)return k.configBaseUrl=n,i(t)}M.fatal("Unable to retrieve configuration. status: "+e.status+" text: "+e.statusText),t(!1)}}(n,e)},n.send()}(function(e){e?(O="Y",t()):(O="E",M.fatal(o))}):(O="E",M.fatal(i))},loadFromElement:W,_load:function(e){G(e),O="Y"}}),B=(A=H.$,U=F,{sendSiteEvent:function(e){var t=u();t.open("POST",A.siteApi,!0),t.withCredentials=!0,t.timeout=A.requestTimeout,t.addEventListener("timeout",function(){U.error("Timeout - no response from Segmint after "+A.requestTimeout+"ms")}),t.setRequestHeader("Content-Type","application/json"),t.onreadystatechange=function(){4===t.readyState&&(200===t.status||(400<=t.status&&t.status<500?U.error("Sending of site event failed."):U.error("Unable to record site event. status: "+t.status)))},t.send(JSON.stringify(e))},getHtmlOffer:function(e,t,n){j(A.zoneApi,e,t,n)},getHtmlPreview:function(e,t,n){j(A.previewApi,e,t,n)}}),$=(S=b=F,x=y=B,N=function(e,t){var n=!1;return{isEnabled:function(){return n},flag:function(){return"R"},spa:function(){return!1},enable:function(){n=!0},disable:function(){n=!1},apply:function(){e.reachId&&e.reachApi?(p(),g(e.reachApi+"/"+e.reachId,e.ucic)):(n=!1,t.error("Reach Feature is missing requried config options. Disabling."))}}}((T=h=H).$,S),I=function(e,t){var n=!1;return{isEnabled:function(){return n},flag:function(){return"C"},spa:function(){return!1},enable:function(){n=!0},disable:function(){n=!1},apply:function(){e.cupcakeApi&&e.cupcakeId?(p(),g(e.cupcakeApi+"/"+e.cupcakeId,e.ucic)):(n=!1,t.error("Cupcake Feature is missing requried config options. Disabling."))}}}(T.$,S),C=[function(t){function n(e){t.loadFromElement(e)}return{isEnabled:function(){return!0},flag:function(){return null},spa:function(){return!0},enable:function(){},disable:function(){},apply:function(){var e=document.getElementById("seg-profile");e&&n(e)},applicableElement:function(e){return"seg-profile"===e.id},processAddedNode:n,onMutation:function(e){var t=document.getElementById("seg-profile");t&&t.getAttribute("data-ucic")&&n(t)}}}(T),function(n,i,o){var e=!1;return{isEnabled:function(){return e},flag:function(){return null},spa:function(){return!1},enable:function(){e=!0},disable:function(){e=!1},apply:function(){var e=document.getElementById("seg-client");if(e&&e.src&&!e.src.match(/.*segmint.net\/segmint.min.js$/)){i.debug("Segmint Client is not hosted by Segmint.");var t=v(n.siteId,m(),"nth");o.sendSiteEvent(t)}}}}(T.$,S,x),function(i,t,o){var n=!1,r="";return{isEnabled:function(){return n},flag:function(){return"S"},spa:function(){return!0},enable:function(){n=!0},disable:function(){n=!1},apply:function(){if(i.siteId&&i.siteApi){r=m();var e=v(i.siteId,r,"pgv");o.sendSiteEvent(e)}else t.error("VisitedFeature is missing required config options. Disabling."),n=!1},applicableElement:function(e){return!1},processAddedNode:function(e){},onMutation:function(e){var t=m();if(t!==r){var n=new v(i.siteId,t,"pgv");o.sendSiteEvent(n)}}}}(T.$,S,x),function(o,n,r){var i=!1;function a(e){t(e,"mouseup",function(e){var t=e.currentTarget;if(t.href&&!t.href.startsWith("javascript")){var n=function(e){var t=e.split("?")[0];return"/"!=t.charAt(t.length-1)?t:t.substr(0,t.length-1)}(t.href),i=v(o.siteId,n,"clk");r.sendSiteEvent(i)}})}return{isEnabled:function(){return i},flag:function(){return"S"},spa:function(){return!0},enable:function(){i=!0},disable:function(){i=!1},apply:function(){if(o.siteId&&o.siteApi)for(var e=document.querySelectorAll("a"),t=0;t<e.length;t++)a(e[t]);else n.error("LinksFeature is missing required config options. Disabling."),i=!1},applicableElement:function(e){return"A"===e.tagName.toUpperCase()},processAddedNode:function(e){a(e)}}}(T.$,S,x),function(f,r,p){var a=!1,g={BUTTON:["name","id",{name:"value",primary:"innerText",secondary:"textContent"}],INPUT:["name","id","value"]};function u(e){var t=e.tagName.toUpperCase();if("INPUT"===t){var n=e.type.toUpperCase();if("BUTTON"===n||"SUBMIT"===n)return!0}else if("BUTTON"===t)return!0;return!1}function s(d){t(d,"mouseup",function(e){for(var t=d,n=e.currentTarget,i={},o=g[n.tagName.toUpperCase()],r=0;r<o.length;r++)if("string"==typeof o[r]){var a=o[r];i[a]=t[a]?t[a]:""}else{var u=o[r].name,s=o[r].primary,c=o[r].secondary;t[s]?i[u]=t[s]:t[c]?i[u]=t[c]:i[u]=""}var l=v(f.siteId,m(),"bclk",i);p.sendSiteEvent(l)})}return{isEnabled:function(){return a},flag:function(){return"S"},spa:function(){return!0},enable:function(){a=!0},disable:function(){a=!1},apply:function(){if(f.siteId&&f.siteApi){for(var e=document.querySelectorAll("input"),t=0;t<e.length;t++){var n=e[t];u(n)&&s(n)}var i=document.querySelectorAll("button");for(t=0;t<i.length;t++){var o=i[t];u(o)&&s(o)}}else a=!1,r.error("Buttons Feature is missing requried config options. Disabling.")},applicableElement:u,processAddedNode:function(e){s(e)}}}(T.$,S,x),N,I,function(o,r,t){var n=!1;function i(n){var e=n.getAttribute("data-zone-id");if(e){var i=o.getZoneConfig(e);t.getHtmlOffer(e,function(e,t){a(r,n,i,e,t)},i)}else r.error("Found element tagged for zone replacement but it has not 'data-zone-id' attribute.")}return{isEnabled:function(){return n},flag:function(){return"Z"},spa:function(){return!0},enable:function(){n=!0},disable:function(){n=!1},apply:function(){if(d(),!o.$.zoneApi)return r.error("Invalid zone configuration. Zones not enabled."),void(n=!1);for(var e=document.getElementsByClassName("seg-zone"),t=0;t<e.length;t++)i(e[t])},applicableElement:function(e){return e.classList.contains("seg-zone")},processAddedNode:function(e){i(e)}}}(T,S,x),function(o,r,t){var n=!1;function i(n){var e=n.getAttribute("data-preview-id");if(e){var i=o.getZoneConfig(e);t.getHtmlPreview(e,function(e,t){a(r,n,i,e,t)},i)}else r.error("Found element tagged for zone replacement but it has not 'data-preview-id' attribute.")}return{isEnabled:function(){return n},flag:function(){return"Z"},spa:function(){return!0},enable:function(){n=!0},disable:function(){n=!1},apply:function(){if(d(),!o.$.previewApi)return r.error("Invalid preview configuration. Previews not enabled."),void(n=!1);for(var e=document.querySelectorAll(".seg-media-preview"),t=0;t<e.length;t++)i(e[t])},applicableElement:function(e){return e.classList.contains("seg-media-preview")},processAddedNode:function(e){i(e)}}}(T,S,x)],E={enableFeatures:function(){if(T.$.featureList){for(var e=0;e<C.length;e++){var t=C[e];t.flag()&&-1!==T.$.featureList.indexOf(t.flag())&&t.enable()}N.isEnabled()&&I.isEnabled()&&I.disable()}else S.error("Unabled to enable features. No feature list present.")},applyFeatures:function(){for(var e=0;e<C.length;e++){var t=C[e];try{t.isEnabled()&&t.apply()}catch(e){S.error("Failed to apply feature."),S.error(e)}}},startSpaWatching:function(){e(D)},stopSpaWatching:function(){L&&(L.disconnect(),L=null)},_overrideFeatures:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(;0<C.length;)C.pop();for(var n=0;n<e.length;n++)C.push(e[n])}},w=[],{version:"",init:function(){h.$.defaultInit?(b.debug("Using default init"),w.push(function(){e(function(){h.$.logEnabled&&b.enable(),E.enableFeatures(),E.applyFeatures()})}),h.load(E.startSpaWatching)):(b.debug("Skipping default init"),h.load(X)),P()},getHtmlOffer:function(e,t,n){R(function(){y.getHtmlOffer(e,t,n||h.$.defaultZoneConfig)})},getHtmlPreview:function(e,t,n){R(function(){y.getHtmlPreview(e,t,n||h.$.defaultZoneConfig)})}});function R(e){h.errorLoading()||(h.isLoaded()?e():w.push(e))}function P(){if(h.errorLoading())w.length=0;else{if(h.isLoaded()){var e=function(){for(;0<w.length;){var e=w.pop();e&&setTimeout(e,0)}};return e(),void setTimeout(e,20)}h.isLoading()&&setTimeout(P,20)}}function X(){}function D(){L||(MutationObserver?(L=new MutationObserver(Z)).observe(document.body,{childList:!0,subtree:!0,attributes:!0}):S.debug("MutationObserver not supported. No SPA features will be executed."))}function Z(e){for(var t=0;t<C.length;t++){var n=C[t];if(n.isEnabled()&&n.spa())if(n.onMutation)n.onMutation(e);else for(var i=0;i<e.length;i++)o=n,(r=e[i]).addedNodes.length&&function e(t,n){for(var i=0;i<n.length;i++){try{1===n[i].nodeType&&n[i]instanceof HTMLElement&&t.applicableElement(n[i])&&t.processAddedNode(n[i])}catch(e){S.error("Fail to instrument element. Feature flag "+t.flag())}n[i].childNodes&&0<n[i].childNodes.length&&e(t,n[i].childNodes)}}(o,r.addedNodes)}var o,r}function j(e,t,n,i){var o=[];null!=i&&("responsive"===i.style&&o.push(encodeURI("responsive=true")),i.newWindow&&o.push(encodeURI("new_window=true")),i.placeholder&&o.push(encodeURI("placeholder=true"))),A.ucic&&o.push(encodeURI("ucic="+A.ucic));var r=u(),a=0===o.length?"":o.join("&");r.open("GET",e+"/"+t+"?"+a,!0),r.withCredentials=!0,r.timeout=A.requestTimeout,r.addEventListener("timeout",function(){n(null,"timeout"),U.error("Timeout - no response from Segmint after "+A.requestTimeout+"ms")}),r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){if(!r.responseText)return void n(null,s("No content in response."));U.debug(r.responseText);var e=JSON.parse(r.responseText);e.body?n({content:e.body,width:e.width,height:e.height},null):n(null,s("No body in json."))}else 400<=r.status&&r.status<500?n(null,s("Bad request.")):300<=r.status&&r.status<400?n(null,s("Unexpected status: "+r.status)):n(null,s("Unknown error."))},r.send()}function W(e){for(var t=/^data-/,n=e.attributes,i=0;i<n.length;i++){var o=n[i];if(o.name.match(t)){var r=o.name.replace(t,"").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()});"false"==o.value?k[r]=!1:k[r]=o.value}}}function G(e){!function(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}(k,e)}function _(e,t,n){var i="SGMT("+e+"): "+t;n?console.error(i):console.log(i)}$.version="2.0.2",(window.$egmint=$).init()}();